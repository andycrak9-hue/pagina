<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Admin</title>

<style>
body{
  margin:0;font-family:system-ui,Arial;
  background:#0f1220;color:#e7e9ff;
  display:grid;place-items:center;min-height:100vh
}
.panel{
  width:100%;max-width:440px;
  background:#161a2f;padding:24px;
  border-radius:16px
}
label{display:block;margin-top:12px}
input,select,button{
  width:100%;margin-top:6px;
  padding:10px;border-radius:10px;border:none
}
input,select{background:#0b0f2a;color:#fff}
button{background:#6c7cff;font-weight:bold;cursor:pointer}
.item{
  display:flex;justify-content:space-between;
  align-items:center;margin-top:8px
}
.item button{width:auto;padding:4px 8px}
</style>
</head>
<body>

<div class="panel">
  <h2>Panel Admin</h2>

  <label>T√≠tulo</label>
  <input id="title">

  <label>Resoluci√≥n</label>
  <input id="res">

  <label>Categor√≠a</label>
  <select id="category">
    <option value="desktop">Escritorio</option>
    <option value="mobile">M√≥vil</option>
    <option value="4k">4K</option>
  </select>

  <label>Imagen (preview)</label>
  <input id="image" placeholder="https://imagen-preview.jpg">

  <label>Link de descarga (archivo real)</label>
  <input id="download" placeholder="https://archivo-final.jpg">

  <button onclick="save()">Guardar fondo</button>

  <div id="list"></div>
</div>

<script>
// üîê CONTRASE√ëA
const PASSWORD = "admin123";
if (sessionStorage.getItem("auth") !== "ok") {
  const pass = prompt("Contrase√±a del panel:");
  if (pass !== PASSWORD) {
    alert("Acceso denegado");
    location.href = "/";
  }
  sessionStorage.setItem("auth","ok");
}

let editIndex = null;

// UTILIDADES
function getFondos(){
  return JSON.parse(localStorage.getItem("fondos") || "[]");
}
function setFondos(f){
  localStorage.setItem("fondos", JSON.stringify(f));
}

// GUARDAR / EDITAR
function save(){
  const fondo = {
    title: title.value,
    res: res.value,
    category: category.value,
    image: image.value,
    download: download.value || image.value
  };

  const fondos = getFondos();
  if(editIndex !== null){
    fondos[editIndex] = fondo;
    editIndex = null;
  } else {
    fondos.push(fondo);
  }

  setFondos(fondos);
  clearForm();
  render();
}

// EDITAR
function edit(i){
  const f = getFondos()[i];
  title.value = f.title;
  res.value = f.res;
  category.value = f.category;
  image.value = f.image;
  download.value = f.download || "";
  editIndex = i;
}

// ELIMINAR
function del(i){
  if(!confirm("¬øEliminar fondo?")) return;
  const f = getFondos();
  f.splice(i,1);
  setFondos(f);
  render();
}

function clearForm(){
  title.value = res.value = image.value = download.value = "";
}

// LISTADO
function render(){
  const list = document.getElementById("list");
  const fondos = getFondos();
  list.innerHTML = "<h3>Fondos</h3>";
  fondos.forEach((f,i)=>{
    list.innerHTML += `
      <div class="item">
        ${f.title}
        <div>
          <button onclick="edit(${i})">‚úèÔ∏è</button>
          <button onclick="del(${i})">üóëÔ∏è</button>
        </div>
      </div>`;
  });
}
render();
</script>

</body>
</html>
